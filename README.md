# dicViewer

## はじめに

国立国会図書館デジタルコレクションには著作権保護期間が過ぎた有用な文書が山のように眠っています。その中には辞典系のものも含まれているものの、ページの多さゆえに有効利用しづらいと感じたものもいくつかあります。

こういった経緯から、岡倉由三郎先生が主幹した「新英和大辭典（研究社, 1929）」と「新英和中辭典（研究社, 1929）」の閲覧アプリを作ってみようとしたのがことの発端です。

## アプリの概要

ブラウザー上で動作し、検索語を入力すると、ローカル環境に配置した辞書ファイルの該当ページを表示します（macOS上のChrome、Firefox、Safari、Operaで動作確認）。

## インストール

各PCにインストールする概略手順は以下の通りです（なお、初期ファイルの配置スクリプトをPython（Ver.３）で記述しているため、Windows環境ではPythonのインストールが必要（なはず）
です）。

### 概略手順
1. このアプリをダウンロード、解凍する。
2. 国立国会図書館デジタルコレクションから元ネタとなる辞典のPDFをダウンロードする。
3. 辞典のPDFを「1」で展開したフォルダーに移動する。
4. ターミナルウィンドウを起動し、「1」で展開したフォルダー内からinstaller.pyスクリプトを実行する。

### 詳細手順
1. このアプリは以下のURLから取得可能です。  
https://github.com/mmurak/dicViewer/archive/refs/heads/main.zip  
ZIPファイルをダウンロードできたら、ダブルクリックして展開してください。
これでmacOSなら「ダウンロード」フォルダー（~/Downloads/）上に dicViewer-mainというフォルダーが作成されます。

2. 辞典のPDFは以下のURLから取得可能です（JPGと書かれた黒いアイコンの右隣にある「下向き矢印」がダウンロード用のアイコンです）。  
新英和大辭典（研究社, 1929）： https://dl.ndl.go.jp/info:ndljp/pid/1126810  
新英和中辭典（研究社, 1929）： https://dl.ndl.go.jp/info:ndljp/pid/1904907  
※ これらのファイルはかなり大きい（400MB超と300MB弱）のでダウンロードにもそれなりの時間がかかります。　デジタルコレクションのサーバーに負担がかからない時間帯を選び、1つずつダウンロードしてください。

3. ダウンロードしたPDFファイルを「1」で展開できたフォルダー内（installer.pyファイルがある場所）に移動します。

4. インストールスクリプトを使ってファイルを配置します。

　   * まずターミナル（Windows系だとコマンドプロンプト）を開き、cdコマンドでPDFファイルのあるフォルダーに移動します。  
　   macOSの場合、「cd ~/Downloads/dicViewer-main」コマンドを実行します。
　   
　   * その後、pythonでinstaller.py コマンドを実行します。  
　   macOSの場合、Pythonのバージョン2とバージョン3の双方が既にインストールされているため、「python3 installer.py」というコマンドになります。
　   
　   * また、スクリプトの実行時には「辞書選択メニューに表示する文字列」の入力が求められます。  
　   digidepo_1126810_PDF の処理時には「新英和大辭典（研究社, 1929）」、digidepo_1904907_PDF の処理時には「新英和中辭典（研究社, 1929）」と入力してください（使用者が識別できる文字列であれば何でも良いのですが、、、）。

※ なお、アプリの検索速度を向上させるため、インストールスクリプトではPDF内に埋め込まれている画像をすべて抽出し、各ページを独立したファイルとしてresourcesフォルダー内に格納しています。　このためPDFファイルとほぼ同じだけの空き容量が必要となります。

## 使い方

* ブラウザーから展開フォルダーにあるindex.htmlをオープンします。
* 左上にあるドロップダウンボックスは辞書選択メニューです。
* その隣りにあるのが辞書本体以外の目次を選択するメニューです。
* escキーを押すと、検索ウィンドウがクリアされ、検索語を入力できるようになります。
* 右上隅のボタンを使って、前ページ、次ページに読み進むことができます。
* ページ表示画面上でクリックすると拡大鏡が表示され、もう一度クリックすると消えます。

## その他

* 辞書選択メニューの順序を変更するには、config.js ファイルをテキストエディターでオープンし、エントリーの順序を変更してください。

